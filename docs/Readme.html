<h1 id="hlk-ld2410s">HLK-LD2410S</h1>
<p>Arduino library for <strong>low power human presence sensor</strong>  module <strong>HLK-LD2410S</strong></p>
<p><a href="LICENSE"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
<a href="https://github.com/phuongnamzz/HLK-LD2410S/stargazers"><img src="https://img.shields.io/github/stars/phuongnamzz/HLK-LD2410S" alt="GitHub stars"></a>
<a href="https://github.com/phuongnamzz/HLK-LD2410S/network"><img src="https://img.shields.io/github/forks/phuongnamzz/HLK-LD2410S" alt="GitHub forks"></a></p>
<p><img src="https://img.shields.io/badge/Platforms-ESP32%20%7C%20AVR%20%7C%20STM32-green" alt="Platforms">
<img src="https://img.shields.io/github/v/release/phuongnamzz/HLK-LD2410S?color=brightgreen" alt="Version">
<img src="https://img.shields.io/badge/Arduino-Library-yellow" alt="Arduino Library">
<img src="https://img.shields.io/badge/PlatformIO-Library-orange" alt="PlatformIO"></p>
<p>📁 <a href="https://drive.google.com/drive/folders/1lCQv3mfHJ3XKXzweeHPFnJ_8_D_EWEKk">📄 Official Documents &amp; Driver Files</a></p>
<hr>
<h2 id="-module-types">🧭 Module Types</h2>
<p float="left">
  <img src="https://raw.githubusercontent.com/phuongnamzz/HLK-LD2410S/main/resources/HLK-2410S_pinout.png" width="45%" />
  <img src="https://raw.githubusercontent.com/phuongnamzz/HLK-LD2410S/main/resources/LD2410S.jpg" width="45%" />
</p>

<hr>
<h2 id="overview">Overview</h2>
<p>The <strong>HLK-LD2410S</strong> is a battery-powered ultra-low-power milimeter-wave sensor based on Hi-Link&#39;s milimeter-wave sensor chip.</p>
<ul>
<li>Intergrated intelligent milimeter wave sensor SoC 24GHz </li>
<li>Uses millimeter wave sensor distance measurement technology and ICL1112 chip
advanced proprietary radar signal processing and low power control technology to achieve accurate
perception of moving, micromotion and standing human body.</li>
</ul>
<h2 id="-important-notes">⚠️ Important Notes</h2>
<ul>
<li>Power supply 3.0 -3.6V , recommend 3.3V</li>
<li>Average working current max 0.6mA </li>
<li><p>Max range detection range 10m</p>
</li>
<li><p>Interface with sensor
  Basic procedure:</p>
<ul>
<li>1.Enter the command mode. </li>
<li>2.Set parameter commands or obtain parameter commands. </li>
<li>3.Exit the command mode. </li>
<li>HLK-LD2410S data communication uses a small-endian format, and all data in the following table is
hexadecimal.</li>
</ul>
</li>
</ul>
<h2 id="-pin-description">🧷 Pin Description</h2>
<p><img src="https://raw.githubusercontent.com/phuongnamzz/HLK-LD2410S/main/resources/pinout.png" alt="Pin description"></p>
<h2 id="-esp32-connection-table">🔗 ESP32 Connection Table</h2>
<table>
<thead>
<tr>
<th style="text-align:center">🆔 No</th>
<th style="text-align:center">📟 LD6002 Pin</th>
<th style="text-align:center">⚙️ Function</th>
<th style="text-align:center">📲 ESP32 Pin</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center"><strong>3V3</strong></td>
<td style="text-align:center">⚡ Power Input</td>
<td style="text-align:center"><strong>3V3</strong></td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center"><strong>GND</strong></td>
<td style="text-align:center">🛑 Ground</td>
<td style="text-align:center"><strong>GND</strong></td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center"><strong>TX0</strong></td>
<td style="text-align:center">📤 Serial TX</td>
<td style="text-align:center"><strong>GPIO16</strong></td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center"><strong>RX0</strong></td>
<td style="text-align:center">📥 Serial RX</td>
<td style="text-align:center"><strong>GPIO17</strong></td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center"><strong>OT2</strong></td>
<td style="text-align:center">📥IO</td>
<td style="text-align:center"><strong>NC</strong></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="-serial-protocols">📟 Serial Protocols</h2>
<h3 id="-baudrate-115200_8n1-"><em>- Baudrate: 115200_8N1</em></h3>
<h3 id="-switch-the-module-output-mode">- Switch the module output mode</h3>
<p><img src="https://raw.githubusercontent.com/phuongnamzz/HLK-LD2410S/main/resources/Switch%20the%20module%20output%20mode.png" alt="Switch the module output mode"></p>
<pre><code class="lang-cpp">
<span class="hljs-keyword">bool</span> LD2410S::switchToMinimalMode()
{
    sendFrameHead();

    _serial.<span class="hljs-built_in">write</span>(<span class="hljs-number">0x08</span>);
    _serial.<span class="hljs-built_in">write</span>(<span class="hljs-number">0x00</span>);
    _serial.<span class="hljs-built_in">write</span>(<span class="hljs-number">0x7A</span>);
    _serial.<span class="hljs-built_in">write</span>(<span class="hljs-number">0x00</span>);

    <span class="hljs-keyword">const</span> uint8_t param[<span class="hljs-number">6</span>] = {<span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>};
    _serial.<span class="hljs-built_in">write</span>(param, <span class="hljs-keyword">sizeof</span>(param));

    sendFrameEnd();

    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> start = <span class="hljs-built_in">millis</span>();
    <span class="hljs-built_in">while</span> (<span class="hljs-built_in">millis</span>() - start &lt; <span class="hljs-number">1000</span>)
    {
        <span class="hljs-built_in">if</span> (_serial.<span class="hljs-built_in">available</span>() &gt;= <span class="hljs-number">14</span>)
        {
            uint8_t ack[<span class="hljs-number">14</span>];
            _serial.<span class="hljs-built_in">readBytes</span>(ack, <span class="hljs-keyword">sizeof</span>(ack));
            LD2410S_LOG_LINE(<span class="hljs-string">"Switch to minimal output mode data:"</span>);
            <span class="hljs-built_in">for</span> (uint8_t i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">sizeof</span>(ack); ++i)
            {
                LD2410S_LOG(<span class="hljs-string">"%02X "</span>, ack[i]);
            }
            LD2410S_LOG_LINE(<span class="hljs-string">""</span>);
            <span class="hljs-built_in">if</span> (ack[<span class="hljs-number">0</span>] == <span class="hljs-number">0xFD</span> &amp;&amp; ack[<span class="hljs-number">1</span>] == <span class="hljs-number">0xFC</span> &amp;&amp; ack[<span class="hljs-number">2</span>] == <span class="hljs-number">0xFB</span> &amp;&amp; ack[<span class="hljs-number">3</span>] == <span class="hljs-number">0xFA</span> &amp;&amp; ack[<span class="hljs-number">6</span>] == <span class="hljs-number">0x7A</span> &amp;&amp; ack[<span class="hljs-number">7</span>] == <span class="hljs-number">0x01</span>)
            {
                LD2410S_LOG_LINE(<span class="hljs-string">"Change to minimal data output mode success"</span>);
                <span class="hljs-built_in">return</span> true;
            }
        }
    }
    <span class="hljs-built_in">return</span> false;
}
</code></pre>
<h3 id="-read-the-firmware-version-command">- Read the firmware version command</h3>
<p><img src="https://raw.githubusercontent.com/phuongnamzz/HLK-LD2410S/main/resources/Read%20the%20firmware%20version%20command.png" alt="Read the firmware version command"></p>
<pre><code class="lang-cpp">
<span class="hljs-keyword">bool</span> LD2410S::readFirmwareVersion(<span class="hljs-keyword">uint16_t</span> &amp;major, <span class="hljs-keyword">uint16_t</span> &amp;minor, <span class="hljs-keyword">uint16_t</span> &amp;patch)
{
    <span class="hljs-keyword">while</span> (_serial.available())
        _serial.read();

    sendFrameHead();
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> cmd[] = {<span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>};
    _serial.write(cmd, <span class="hljs-keyword">sizeof</span>(cmd));
    sendFrameEnd();
    _serial.flush();

    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> start = millis();
    <span class="hljs-keyword">while</span> (millis() - start &lt; <span class="hljs-number">1000</span>)
    {
        <span class="hljs-keyword">if</span> (_serial.available() &gt;= <span class="hljs-number">24</span>)
        {
            <span class="hljs-keyword">uint8_t</span> ack[<span class="hljs-number">24</span>];
            _serial.readBytes(ack, <span class="hljs-keyword">sizeof</span>(ack));
            LD2410S_LOG_LINE(<span class="hljs-string">"Firmware version data:"</span>);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">24</span>; i++)
            {
                LD2410S_LOG(<span class="hljs-string">"%02X "</span>, ack[i]);
            }
            LD2410S_LOG_LINE();

            <span class="hljs-keyword">if</span> (ack[<span class="hljs-number">0</span>] == <span class="hljs-number">0xFD</span> &amp;&amp; ack[<span class="hljs-number">1</span>] == <span class="hljs-number">0xFC</span> &amp;&amp; ack[<span class="hljs-number">2</span>] == <span class="hljs-number">0xFB</span> &amp;&amp; ack[<span class="hljs-number">3</span>] == <span class="hljs-number">0xFA</span> &amp;&amp;
                ack[<span class="hljs-number">6</span>] == <span class="hljs-number">0x00</span> &amp;&amp; ack[<span class="hljs-number">7</span>] == <span class="hljs-number">0x01</span>)
            {
                major = (<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">uint16_t</span>&gt;(ack[<span class="hljs-number">15</span>]) &lt;&lt; <span class="hljs-number">8</span>) | ack[<span class="hljs-number">14</span>];
                minor = (<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">uint16_t</span>&gt;(ack[<span class="hljs-number">17</span>]) &lt;&lt; <span class="hljs-number">8</span>) | ack[<span class="hljs-number">16</span>];
                patch = (<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">uint16_t</span>&gt;(ack[<span class="hljs-number">19</span>]) &lt;&lt; <span class="hljs-number">8</span>) | ack[<span class="hljs-number">18</span>];
                LD2410S_LOG_LINE(<span class="hljs-string">"Read firmware version  Ok"</span>);
                LD2410S_LOG(<span class="hljs-string">"\nmajor = %d, minor = %d, patch = %d"</span>, major, minor, patch);
                delay(<span class="hljs-number">50</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
    }
    delay(<span class="hljs-number">50</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h3 id="-enable-configuration-command">- Enable configuration command</h3>
<p><img src="https://raw.githubusercontent.com/phuongnamzz/HLK-LD2410S/main/resources/Enable%20configuration%20command.png" alt="Enable configuration command"></p>
<pre><code class="lang-cpp"><span class="hljs-keyword">bool</span> LD2410S::enterConfigMode()
{
    sendFrameHead();
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> cmd[] = {<span class="hljs-number">0x04</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0xFF</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x00</span>};
    _serial.write(cmd, <span class="hljs-keyword">sizeof</span>(cmd));
    sendFrameEnd();

    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> start = millis();

    <span class="hljs-keyword">while</span> (millis() - start &lt; <span class="hljs-number">500</span>)
    {
        <span class="hljs-keyword">if</span> (_serial.available() &gt;= <span class="hljs-number">18</span>)
        {
            <span class="hljs-keyword">uint8_t</span> ack[<span class="hljs-number">18</span>];
            _serial.readBytes(ack, <span class="hljs-keyword">sizeof</span>(ack));
            <span class="hljs-keyword">if</span> (ack[<span class="hljs-number">0</span>] == <span class="hljs-number">0xFD</span> &amp;&amp; ack[<span class="hljs-number">1</span>] == <span class="hljs-number">0xFC</span> &amp;&amp; ack[<span class="hljs-number">2</span>] == <span class="hljs-number">0xFB</span> &amp;&amp; ack[<span class="hljs-number">3</span>] == <span class="hljs-number">0xFA</span> &amp;&amp;
                ack[<span class="hljs-number">6</span>] == <span class="hljs-number">0xFF</span> &amp;&amp; ack[<span class="hljs-number">7</span>] == <span class="hljs-number">0x01</span> &amp;&amp; ack[<span class="hljs-number">10</span>] == <span class="hljs-number">0x03</span> &amp;&amp; ack[<span class="hljs-number">11</span>] == <span class="hljs-number">0x00</span>)
            {
                LD2410S_LOG_LINE(<span class="hljs-string">"Enter config mode Ok"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h3 id="-end-configuration-command">- End configuration command</h3>
<p><img src="https://raw.githubusercontent.com/phuongnamzz/HLK-LD2410S/main/resources/End%20configuration%20command.png" alt="End configuration command"></p>
<pre><code class="lang-cpp"><span class="hljs-keyword">bool</span> LD2410S::exitConfigMode()
{
    sendFrameHead();
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> cmd[] = {<span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0xFE</span>, <span class="hljs-number">0x00</span>};
    _serial.write(cmd, <span class="hljs-keyword">sizeof</span>(cmd));
    sendFrameEnd();

    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> start = millis();
    <span class="hljs-keyword">while</span> (millis() - start &lt; <span class="hljs-number">500</span>)
    {
        <span class="hljs-keyword">if</span> (_serial.available() &gt;= <span class="hljs-number">14</span>)
        {
            <span class="hljs-keyword">uint8_t</span> ack[<span class="hljs-number">14</span>];
            _serial.readBytes(ack, <span class="hljs-keyword">sizeof</span>(ack));
            <span class="hljs-keyword">if</span> (ack[<span class="hljs-number">0</span>] == <span class="hljs-number">0xFD</span> &amp;&amp; ack[<span class="hljs-number">1</span>] == <span class="hljs-number">0xFC</span> &amp;&amp; ack[<span class="hljs-number">2</span>] == <span class="hljs-number">0xFB</span> &amp;&amp; ack[<span class="hljs-number">3</span>] == <span class="hljs-number">0xFA</span> &amp;&amp;
                ack[<span class="hljs-number">6</span>] == <span class="hljs-number">0xFE</span> &amp;&amp; ack[<span class="hljs-number">7</span>] == <span class="hljs-number">0x01</span>)
            {
                LD2410S_LOG_LINE(<span class="hljs-string">"Exit config mode Ok"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h3 id="-write-serial-number-command">- Write Serial number command</h3>
<p><img src="https://raw.githubusercontent.com/phuongnamzz/HLK-LD2410S/main/resources/Write%20Serial%20number%20command.png" alt="Write Serial number command"></p>
<pre><code class="lang-cpp">
</code></pre>
<h3 id="-read-serial-number-command">- Read serial number command</h3>
<p><img src="https://raw.githubusercontent.com/phuongnamzz/HLK-LD2410S/main/resources/Read%20serial%20number%20command.png" alt="Read serial number command"></p>
<pre><code class="lang-cpp"><span class="hljs-keyword">bool</span> LD2410S::readSerialNumber(<span class="hljs-keyword">char</span> *<span class="hljs-built_in">buffer</span>, size_t len)
{
    <span class="hljs-built_in">while</span> (_serial.<span class="hljs-built_in">available</span>())
        _serial.<span class="hljs-built_in">read</span>();

    <span class="hljs-built_in">if</span> (len &lt; <span class="hljs-number">9</span>)
        <span class="hljs-built_in">return</span> false;

    <span class="hljs-built_in">delay</span>(<span class="hljs-number">100</span>);

    sendFrameHead();
    <span class="hljs-keyword">const</span> uint8_t cmd[] = {<span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x11</span>, <span class="hljs-number">0x00</span>};
    _serial.<span class="hljs-built_in">write</span>(cmd, <span class="hljs-keyword">sizeof</span>(cmd));
    sendFrameEnd();
    _serial.<span class="hljs-built_in">flush</span>();

    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> start = <span class="hljs-built_in">millis</span>();
    <span class="hljs-built_in">while</span> (<span class="hljs-built_in">millis</span>() - start &lt; <span class="hljs-number">1000</span>)
    {
        <span class="hljs-built_in">if</span> (_serial.<span class="hljs-built_in">available</span>() &gt;= <span class="hljs-number">24</span>)
        {
            uint8_t ack[<span class="hljs-number">24</span>];
            _serial.<span class="hljs-built_in">readBytes</span>(ack, <span class="hljs-keyword">sizeof</span>(ack));

            LD2410S_LOG_LINE(<span class="hljs-string">"Serial number data: "</span>);
            <span class="hljs-built_in">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">24</span>; ++i)
                LD2410S_LOG(<span class="hljs-string">"%02X "</span>, ack[i]);
            LD2410S_LOG_LINE();

            <span class="hljs-built_in">if</span> (ack[<span class="hljs-number">0</span>] == <span class="hljs-number">0xFD</span> &amp;&amp; ack[<span class="hljs-number">1</span>] == <span class="hljs-number">0xFC</span> &amp;&amp; ack[<span class="hljs-number">2</span>] == <span class="hljs-number">0xFB</span> &amp;&amp; ack[<span class="hljs-number">3</span>] == <span class="hljs-number">0xFA</span> &amp;&amp;
                ack[<span class="hljs-number">6</span>] == <span class="hljs-number">0x11</span> &amp;&amp; ack[<span class="hljs-number">7</span>] == <span class="hljs-number">0x01</span> &amp;&amp;
                ack[<span class="hljs-number">8</span>] == <span class="hljs-number">0x00</span> &amp;&amp; ack[<span class="hljs-number">9</span>] == <span class="hljs-number">0x00</span>)
            {
                <span class="hljs-built_in">for</span> (uint8_t i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">8</span>; i++)
                    <span class="hljs-built_in">buffer</span>[i] = <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">char</span>&gt;(ack[<span class="hljs-number">12</span> + i]);
                <span class="hljs-built_in">buffer</span>[<span class="hljs-number">8</span>] = <span class="hljs-string">'\0'</span>;
                <span class="hljs-built_in">delay</span>(<span class="hljs-number">50</span>);
                <span class="hljs-built_in">return</span> true;
            }
        }
    }
    <span class="hljs-built_in">delay</span>(<span class="hljs-number">50</span>);
    <span class="hljs-built_in">return</span> false;
}
</code></pre>
<h3 id="-write-generic-parameter-commands">- Write generic parameter commands</h3>
<p><img src="https://raw.githubusercontent.com/phuongnamzz/HLK-LD2410S/main/resources/Write%20generic%20parameter%20commands.png" alt="Write generic parameter commands"></p>
<pre><code class="lang-cpp">
<span class="hljs-keyword">bool</span> LD2410S::writeGenericParametersCommand()
{
    <span class="hljs-keyword">const</span> uint8_t farthest_distance[<span class="hljs-number">6</span>] = {<span class="hljs-number">0x05</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>};    <span class="hljs-comment">// 1m</span>
    <span class="hljs-keyword">const</span> uint8_t nearest_distance[<span class="hljs-number">6</span>] = {<span class="hljs-number">0x0A</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>};     <span class="hljs-comment">// 0.0m</span>
    <span class="hljs-keyword">const</span> uint8_t delay_time[<span class="hljs-number">6</span>] = {<span class="hljs-number">0x06</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x0A</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>};           <span class="hljs-comment">// 10s</span>
    <span class="hljs-keyword">const</span> uint8_t freq_status_report[<span class="hljs-number">6</span>] = {<span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x28</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>};   <span class="hljs-comment">// 4.0 Hz</span>
    <span class="hljs-keyword">const</span> uint8_t freq_distance_report[<span class="hljs-number">6</span>] = {<span class="hljs-number">0x0C</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x28</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>}; <span class="hljs-comment">// 4.0Hz</span>
    <span class="hljs-keyword">const</span> uint8_t response_speed[<span class="hljs-number">6</span>] = {<span class="hljs-number">0x0B</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x0A</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>};       <span class="hljs-comment">// response normal</span>

    sendFrameHead();

    <span class="hljs-keyword">const</span> uint8_t cmd[] = {<span class="hljs-number">0x26</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x70</span>, <span class="hljs-number">0x00</span>};
    _serial.<span class="hljs-built_in">write</span>(cmd, <span class="hljs-keyword">sizeof</span>(cmd));
    _serial.<span class="hljs-built_in">write</span>(farthest_distance, <span class="hljs-keyword">sizeof</span>(farthest_distance));
    _serial.<span class="hljs-built_in">write</span>(nearest_distance, <span class="hljs-keyword">sizeof</span>(nearest_distance));
    _serial.<span class="hljs-built_in">write</span>(delay_time, <span class="hljs-keyword">sizeof</span>(delay_time));
    _serial.<span class="hljs-built_in">write</span>(freq_status_report, <span class="hljs-keyword">sizeof</span>(freq_status_report));
    _serial.<span class="hljs-built_in">write</span>(freq_distance_report, <span class="hljs-keyword">sizeof</span>(freq_distance_report));
    _serial.<span class="hljs-built_in">write</span>(response_speed, <span class="hljs-keyword">sizeof</span>(response_speed));

    sendFrameEnd();
    _serial.<span class="hljs-built_in">flush</span>();

    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> start = <span class="hljs-built_in">millis</span>();

    <span class="hljs-built_in">while</span> (<span class="hljs-built_in">millis</span>() - start &lt; <span class="hljs-number">1000</span>)
    {
        <span class="hljs-built_in">if</span> (_serial.<span class="hljs-built_in">available</span>() &gt;= <span class="hljs-number">14</span>)
        {
            uint8_t ack[<span class="hljs-number">14</span>];
            _serial.<span class="hljs-built_in">readBytes</span>(ack, <span class="hljs-keyword">sizeof</span>(ack));
            LD2410S_LOG_LINE(<span class="hljs-string">"Generic parameters data: "</span>);
            <span class="hljs-built_in">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">14</span>; i++)
            {
                LD2410S_LOG(<span class="hljs-string">"%02X "</span>, ack[i]);
            }
            LD2410S_LOG_LINE(<span class="hljs-string">""</span>);
            <span class="hljs-built_in">if</span> (ack[<span class="hljs-number">0</span>] == <span class="hljs-number">0xFD</span> &amp;&amp; ack[<span class="hljs-number">1</span>] == <span class="hljs-number">0xFC</span> &amp;&amp; ack[<span class="hljs-number">2</span>] == <span class="hljs-number">0xFB</span> &amp;&amp; ack[<span class="hljs-number">3</span>] == <span class="hljs-number">0xFA</span> &amp;&amp;
                ack[<span class="hljs-number">6</span>] == <span class="hljs-number">0x70</span> &amp;&amp; ack[<span class="hljs-number">7</span>] == <span class="hljs-number">0x01</span>)
            {
                LD2410S_LOG_LINE(<span class="hljs-string">"Write generic parameters Ok"</span>);
                <span class="hljs-built_in">return</span> true;
            }
        }
    }
    <span class="hljs-built_in">return</span> false;
}
</code></pre>
<h3 id="-read-common-parameter-commands">- Read common parameter commands</h3>
<p><img src="https://raw.githubusercontent.com/phuongnamzz/HLK-LD2410S/main/resources/Read%20common%20parameter%20commands.png" alt="Read common parameter commands"></p>
<pre><code class="lang-cpp">
<span class="hljs-keyword">bool </span>LD2410S::readCommonParametersCommand(uint32_t &amp;farthest_distance, uint32_t &amp;nearest_distance, uint32_t &amp;delay_time, uint32_t &amp;freq_status, uint32_t &amp;freq_distance, uint32_t &amp;respond_speed)
{
    sendFrameHead()<span class="hljs-comment">;</span>

    const uint8_t cmd[] = {
        <span class="hljs-number">0x0E</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x71</span>, <span class="hljs-number">0x00</span>,
        <span class="hljs-number">0x05</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x0A</span>, <span class="hljs-number">0x00</span>,
        <span class="hljs-number">0x06</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>,
        <span class="hljs-number">0x0C</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x0B</span>, <span class="hljs-number">0x00</span>}<span class="hljs-comment">;</span>
    _serial.write(cmd, sizeof(cmd))<span class="hljs-comment">;</span>
    sendFrameEnd()<span class="hljs-comment">;</span>

    unsigned long start = millis()<span class="hljs-comment">;</span>

    while (millis() - start &lt; <span class="hljs-number">1000</span>)
    {
        if (_serial.available() &gt;= <span class="hljs-number">38</span>)
        {
            uint8_t ack[<span class="hljs-number">38</span>]<span class="hljs-comment">;</span>
            _serial.readBytes(ack, sizeof(ack))<span class="hljs-comment">;</span>

            LD2410S_LOG_LINE(<span class="hljs-string">"Commond parameters data: "</span>)<span class="hljs-comment">;</span>
            for (int i = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 38; i++)</span>
            {
                LD2410S_LOG(<span class="hljs-string">"%02X "</span>, ack[i])<span class="hljs-comment">;</span>
            }

            if (ack[<span class="hljs-number">0</span>] == <span class="hljs-number">0xFD</span> &amp;&amp; ack[<span class="hljs-number">1</span>] == <span class="hljs-number">0xFC</span> &amp;&amp; ack[<span class="hljs-number">2</span>] == <span class="hljs-number">0xFB</span> &amp;&amp; ack[<span class="hljs-number">3</span>] == <span class="hljs-number">0xFA</span> &amp;&amp;
                ack[<span class="hljs-number">6</span>] == <span class="hljs-number">0x71</span> &amp;&amp; ack[<span class="hljs-number">7</span>] == <span class="hljs-number">0x01</span> &amp;&amp; ack[<span class="hljs-number">8</span>] == <span class="hljs-number">0x00</span> &amp;&amp; ack[<span class="hljs-number">9</span>] == <span class="hljs-number">0x00</span>)
            {
                farthest_distance = parseLEUint32(&amp;ack[<span class="hljs-number">10</span>])<span class="hljs-comment">;</span>
                nearest_distance = parseLEUint32(&amp;ack[<span class="hljs-number">14</span>])<span class="hljs-comment">;</span>
                delay_time = parseLEUint32(&amp;ack[<span class="hljs-number">18</span>])<span class="hljs-comment">;</span>
                freq_status = parseLEUint32(&amp;ack[<span class="hljs-number">22</span>])<span class="hljs-comment">;</span>
                freq_distance = parseLEUint32(&amp;ack[<span class="hljs-number">26</span>])<span class="hljs-comment">;</span>
                respond_speed = parseLEUint32(&amp;ack[<span class="hljs-number">30</span>])<span class="hljs-comment">;</span>

                LD2410S_LOG(<span class="hljs-string">"\nfarthest_distance = %d"</span>, farthest_distance)<span class="hljs-comment">;</span>
                LD2410S_LOG(<span class="hljs-string">"\nnearest_distance = %d"</span>, nearest_distance)<span class="hljs-comment">;</span>
                LD2410S_LOG(<span class="hljs-string">"\ndelay_time = %d"</span>, delay_time)<span class="hljs-comment">;</span>
                LD2410S_LOG(<span class="hljs-string">"\nfreq_status = %d"</span>, freq_status)<span class="hljs-comment">;</span>
                LD2410S_LOG(<span class="hljs-string">"\nfreq_distance = %d"</span>, freq_distance)<span class="hljs-comment">;</span>
                LD2410S_LOG(<span class="hljs-string">"\nrespond_speed = %d\n"</span>, respond_speed)<span class="hljs-comment">;</span>

                return true<span class="hljs-comment">;</span>
            }
        }
    }
    return false<span class="hljs-comment">;</span>
}
</code></pre>
<h2 id="-example-code-esp32-">📦 Example Code (ESP32)</h2>
<pre><code class="lang-cpp">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Arduino.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"LD2410S.h"</span></span>

<span class="hljs-comment">// Pin definitions</span>
<span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">int</span> RX_PIN = <span class="hljs-number">16</span>;
<span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">int</span> TX_PIN = <span class="hljs-number">17</span>;
<span class="hljs-keyword">constexpr</span> size_t SERIAL_NUMBER_BUFFER_SIZE = <span class="hljs-number">16</span>;

<span class="hljs-comment">// Sensor object</span>
LD2410S ld2410s(Serial1, RX_PIN, TX_PIN);

<span class="hljs-comment">// Firmware version variables</span>
uint16_t firmwareMajor = <span class="hljs-number">0</span>;
uint16_t firmwareMinor = <span class="hljs-number">0</span>;
uint16_t firmwarePatch = <span class="hljs-number">0</span>;

<span class="hljs-comment">// Serial number buffer</span>
<span class="hljs-keyword">char</span> serialNumberBuffer[SERIAL_NUMBER_BUFFER_SIZE];

<span class="hljs-comment">// Common parameters</span>
uint32_t farDistance = <span class="hljs-number">0</span>;
uint32_t nearDistance = <span class="hljs-number">0</span>;
uint32_t delayTime = <span class="hljs-number">0</span>;
uint32_t freqStatus = <span class="hljs-number">0</span>;
uint32_t freqDistance = <span class="hljs-number">0</span>;
uint32_t responseTime = <span class="hljs-number">0</span>;

<span class="hljs-comment">// Timing variables</span>
<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> lastStatusMillis = <span class="hljs-number">0</span>;

<span class="hljs-keyword">void</span> <span class="hljs-built_in">setup</span>() {
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">115200</span>);
  ld2410s.<span class="hljs-built_in">begin</span>();
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">1000</span>);

  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Starting"</span>);

  <span class="hljs-comment">// Read firmware version</span>
  <span class="hljs-built_in">if</span> (ld2410s.readFirmwareVersion(firmwareMajor, firmwareMinor, firmwarePatch)) {
    <span class="hljs-built_in">Serial</span>.printf(<span class="hljs-string">"Firmware Version: %d.%d.%d\n"</span>, firmwareMajor, firmwareMinor, firmwarePatch);
  } <span class="hljs-built_in">else</span> {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Failed to read firmware version"</span>);
  }

  <span class="hljs-comment">// Read serial number</span>
  <span class="hljs-built_in">if</span> (ld2410s.readSerialNumber(serialNumberBuffer, <span class="hljs-keyword">sizeof</span>(serialNumberBuffer))) {
    <span class="hljs-built_in">Serial</span>.printf(<span class="hljs-string">"Serial Number: %s\n"</span>, serialNumberBuffer);
  } <span class="hljs-built_in">else</span> {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Failed to read serial number."</span>);
  }

  <span class="hljs-comment">// Read common parameters</span>
  <span class="hljs-built_in">if</span> (ld2410s.readCommonParametersCommand(farDistance, nearDistance, delayTime, freqStatus, freqDistance, responseTime)) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Read common parameters success"</span>);
  } <span class="hljs-built_in">else</span> {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Failed to read common parameters"</span>);
  }

  lastStatusMillis = <span class="hljs-built_in">millis</span>();
}

<span class="hljs-keyword">void</span> <span class="hljs-built_in">loop</span>() {
  ld2410s.<span class="hljs-built_in">loop</span>();

  <span class="hljs-comment">// Print status every second</span>
  <span class="hljs-built_in">if</span> (<span class="hljs-built_in">millis</span>() - lastStatusMillis &gt;= <span class="hljs-number">1000</span>) {
    <span class="hljs-built_in">Serial</span>.printf(<span class="hljs-string">"Target Distance: %d cm\n"</span>, ld2410s.getDistance());
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(ld2410s.isMotionDetected() ? <span class="hljs-string">"Motion"</span> : <span class="hljs-string">"Static"</span>);
    lastStatusMillis = <span class="hljs-built_in">millis</span>();
  }
}
</code></pre>
<pre><code>✅ <span class="hljs-string">Result:</span>
</code></pre><pre><code>Starting
Firmware Version: <span class="hljs-number">1.1.</span><span class="hljs-number">1</span>
Serial <span class="hljs-keyword">Number</span>: <span class="hljs-number">12345678</span>
Read <span class="hljs-keyword">common</span> parameters success
<span class="hljs-keyword">Target</span> Distance: <span class="hljs-number">0</span> cm
Static
<span class="hljs-keyword">Target</span> Distance: <span class="hljs-number">0</span> cm
Static
<span class="hljs-keyword">Target</span> Distance: <span class="hljs-number">0</span> cm
Static
<span class="hljs-keyword">Target</span> Distance: <span class="hljs-number">35</span> cm
Motion
<span class="hljs-keyword">Target</span> Distance: <span class="hljs-number">35</span> cm
Motion
<span class="hljs-keyword">Target</span> Distance: <span class="hljs-number">35</span> cm
Motion
<span class="hljs-keyword">Target</span> Distance: <span class="hljs-number">35</span> cm
Motion
<span class="hljs-keyword">Target</span> Distance: <span class="hljs-number">35</span> cm
Motion
<span class="hljs-keyword">Target</span> Distance: <span class="hljs-number">35</span> cm
Motion
</code></pre>